!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9bac1802-72b9-4e9a-a4a9-b5a478083c4d",e._sentryDebugIdIdentifier="sentry-dbid-9bac1802-72b9-4e9a-a4a9-b5a478083c4d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81296],{81296:function(e,t,r){r.d(t,{Xe:function(){return W},VG:function(){return o},ZP:function(){return L}});var i,o,n=r(52322),l=r(2784),a=r(44781),s=r(71022),c=r(5632),d=r(1169);let p=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flex:1,flexDirection:"column",height:40,justifyContent:"space-between",alignItems:"center","@media (max-width: 600px)":{flexDirection:"column",alinItems:"center",border:"none"}}});function u(e){return(0,n.jsx)(p,{className:"search-input-wrapper",children:(0,n.jsx)(d.Z,{...e,needImageInitAnimation:!0})})}var h=r(38626),m=r(95883),g=r(10875);r(82699),r(58079),r(39097);var x=r(11228);r(29711),r(58251);var f=r(88873);r(52268),r(92453),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{flexShrink:0,display:"none",alignItems:"center",marginLeft:28,marginRight:20,"@media (min-width: 1150px)":{display:"flex"},".upload_project":{marginLeft:20}}}),(0,a.ZP)("ul")(e=>{let{theme:t}=e;return{padding:0,display:"flex"}}),(0,a.ZP)("li")(e=>{let{theme:t}=e;return{whiteSpace:"nowrap",textDecoration:"none",listStyleType:"none",margin:"0 10px",a:{color:t.vars.palette.colorSystem.grey900,fontSize:14,fontWeight:400,height:"var(--navBarHeight)",display:"flex",alignItems:"center"},"&.active a,&:hover a":{position:"relative","&::after":{content:'""',position:"absolute",display:"block",height:2,width:"100%",background:t.vars.palette.colorSystem.grey900,bottom:1,left:0}}}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{margin:0,padding:0,display:"flex",height:"100%",alignItems:"center","@media (min-width: 1150px)":{display:"none"},".item":{color:"#fff",marginRight:"15px",marginLeft:"15px"},".menuIcon":{lineHeight:0,marginRight:"20px",height:"100%",display:"flex",alignItems:"center",color:t.vars.palette.colorSystem.grey900}}}),(0,a.ZP)(x.ZP)(e=>{let{theme:t}=e;return{".narrowPopoverContent":{display:"flex",height:"100%"},".narrowNavMenuContent":{height:"100%",width:"100%",backgroundColor:t.vars.palette.colorSystem.bg_middle,overflowY:"auto",".navMenuItem":{flexDirection:"column",padding:"0",margin:"0px 20px 0",borderBottom:"1px solid ".concat(t.vars.palette.colorSystem.grey300),minHeight:0,"&.uploadMenu":{display:"none","@media (min-width: 600px)":{display:"block"}}}},".otherContent":{height:"100%",flex:1,overflowX:"hidden",overflowY:"auto"}}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{width:"100%",fontSize:"14px",lineHeight:"20px",color:t.vars.palette.colorSystem.grey900,padding:"16px 0",".textContent":{display:"flex",alignItems:"center",justifyContent:"space-between"},".text":{flex:1,display:"block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},".iconContent":{fontSize:10,transform:"rotate(90deg)",marginLeft:5,".icon":{fontSize:"0.8rem"}}}}),r(8765),r(17451),r(11638),r(34932),r(57957);var y=r(35518);(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flex:1,justifyContent:"center",position:"relative",".search-input-container":{margin:"0 auto","&.showing-suggest-container":{borderRadius:"20px 20px 10px 10px",".search-input":{borderRadius:"10px"}},"@media (min-width: 600px)":{width:400},"@media (min-width: 1200px)":{width:700}},input:{height:"32px"}}}),(0,a.ZP)("div")(()=>({position:"absolute",top:"-18px",zIndex:1012,left:0,width:"100%",paddingLeft:10,paddingRight:10})),r(91418),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",background:t.vars.palette.colorSystem.bg_middle,position:"fixed",top:0,left:0,right:0,zIndex:1010,marginRight:"calc(100% - 100vw)","&:after":{content:'""',position:"absolute",display:"block",height:1,width:"100%",background:t.vars.palette.colorSystem.grey200,bottom:0},"&.models-personalized":{background:"linear-gradient(180deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)",".models-personalized_head":{background:"transparent"}}}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{maxWidth:"1920px",padding:"0 10px",flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",height:"var(--navBarHeight)",background:t.vars.palette.colorSystem.bg_middle,"&.auto-width":{maxWidth:"unset"},"@media (min-width: 720px)":{padding:"0 40px"},".upload_project":{marginLeft:24,display:"none","@media(min-width: 1000px)":{display:"inline-block"}},a:{color:t.vars.palette.colorSystem.grey900,textDecoration:"none",fontSize:14,fontWeight:400,"&:not(.logo-link):hover":{textDecoration:"none"}}}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{flex:1,display:"flex",alignItems:"center",height:"100%"}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{fontWeight:"bold",lineHeight:0,svg:{fontSize:10},"&:hover":{color:"unset"}}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",color:t.vars.palette.colorSystem.grey700}}),(0,a.ZP)("div")(e=>{let{theme:t}=e;return{position:"absolute",height:"calc(16px / (10 / 12))",padding:"0px 4px",borderRadius:100,background:"#E14747",color:"#fff",fontSize:12,fontWeight:600,lineHeight:"16px",right:-6,top:-4,border:"1px solid #FFF",transform:"scale(calc(10/12))",display:"flex",alignItems:"center","&.showsmall":{right:-16}}});var v=r(39665),b=r(68696);let S=(0,a.ZP)(g.zL)(()=>({marginTop:"24px"})),w=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",gap:"8px"}}),j=(0,a.ZP)("span")(e=>{let{theme:t}=e;return{color:t.vars.palette.colorSystem.grey900,fontSize:"16px",fontWeight:400,lineHeight:"24px"}});(0,a.ZP)("span")(e=>{let{theme:t}=e;return{em:{fontWeight:700}}});let k=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{fontWeight:600,fontSize:"16px",".highlight":{color:"#e14747"}}}),Z=(0,a.ZP)("span")(e=>{let{theme:t}=e;return{fontWeight:400,color:t.vars.palette.colorSystem.grey900,marginLeft:"5px",".highlight":{fontWeight:600}}}),P=(0,a.ZP)(m.C)(e=>{let{theme:t}=e;return{textDecoration:"underline",textDecorationColor:t.vars.palette.colorSystem.grey900,":hover":{textDecorationColor:t.vars.palette.colorSystem.grey900}}}),C=(0,a.ZP)("span")(e=>{let{theme:t}=e;return{color:t.vars.palette.colorSystem.grey900,fontWeight:600}});function I(e){let{suggest:t,searchInstead:r}=e,{t:i}=(0,s.$G)("common"),o=(0,c.useRouter)(),{keyword:a,enableSearchInstead:d}=o.query;return((0,l.useEffect)(()=>{"false"===d&&o.replace({query:{...o.query,enableSearchInstead:""}},void 0,{shallow:!0})},[d]),t&&t.length||r&&r.actualQuery)?(0,n.jsxs)(S,{className:"adapt-padding",children:[t&&t.length>0&&(0,n.jsxs)(w,{children:[(0,n.jsxs)(j,{children:[i("search.did_you_mean_tip"),": "]}),null==t?void 0:t.map(e=>(0,n.jsx)("div",{children:(0,n.jsx)(P,{href:{query:{keyword:e.text}},children:(0,n.jsx)(C,{children:e.text})})},e.highlighted)),(0,n.jsx)("span",{children:"?"})]}),r&&r.actualQuery&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(k,{children:[(0,n.jsx)(s.cC,{i18nKey:"search.search_instead_title",values:{keyword:null==r?void 0:r.actualQuery},children:(0,n.jsx)("span",{className:"highlight"})}),(0,n.jsxs)(Z,{children:[(0,n.jsxs)("span",{children:["\xa0",i("search.search_instead_continue_title")]}),(0,n.jsx)(P,{href:{query:{keyword:a,enableSearchInstead:"false"}},children:(0,n.jsx)(C,{children:a})})]})]})})]}):null}var z=r(6277);let _=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{background:t.vars.palette.colorSystem.bg_middle}}),E=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{}}),R=(0,a.ZP)(g.zL)(e=>{let{theme:t}=e;return{paddingTop:30,paddingBottom:24}}),N=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"row",height:44,justifyContent:"center","@media (max-width: 600px)":{flexDirection:"column",alinItems:"center",height:"auto",border:"none"}}});(0,a.ZP)(g.zL)(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",alignItems:"center","@media (max-width: 600px)":{flexDirection:"column",alignItems:"start",gap:10}}});let D=(0,a.ZP)("div")(()=>({whiteSpace:"nowrap"})),W=(0,a.ZP)(g.zL)(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",marginTop:24,"@media (min-width: 800px)":{flexDirection:"row",justifyContent:"space-between"}}}),M=(0,a.ZP)(g.zL)(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"center",borderBottom:"1px solid ".concat(t.vars.palette.colorSystem.grey200)}}),T=(0,a.ZP)(m.C)(e=>{let{theme:t}=e;return{color:t.vars.palette.colorSystem.grey600,fontSize:"16px",fontWeight:600,lineHeight:"32px",span:{fontSize:12,lineHeight:"18px"},"&:hover":{textDecoration:"none"},"&.disabled":{pointerEvents:"none",color:t.vars.palette.colorSystem.grey300}}}),H=(0,a.ZP)(v.Z)(e=>{let{theme:t}=e;return{minHeight:40,".MuiTabs-indicator":{height:4}}}),O=(0,a.ZP)(b.Z)(e=>{let{theme:t}=e;return{minHeight:40,justifyContent:"flex-start",color:t.vars.palette.colorSystem.grey600,"&.Mui-selected":{a:{color:t.vars.palette.colorSystem.grey900}},"&:hover":{a:{color:t.vars.palette.colorSystem.grey900}}}});function L(e){let{searchConfig:t,categoryTree:r=[],showSuggest:i,showFilter:o,tabIndex:a,defaultOderBy:d,selectAllSummary:p,suggest:m,createSinceKey:g="designCreateSince",searchInstead:x,showSearchByImages:v,is2DModelSearch:b,filterType:S="design"}=e,{t:w}=(0,s.$G)("common"),j=(0,c.useRouter)().query,{design:k=0,design2d:Z=0,user:P=0,favorites:C=0,communityPost:L=0}=p||{},F=(0,l.useRef)(null),B=j.image||"",q=!!v&&!!B,A=(0,l.useMemo)(()=>[{value:"models",label:(0,n.jsxs)(D,{children:[w("models.models"),(0,n.jsxs)("span",{children:[" (",(k||0)>999?"999+":k||0,")"]})]}),go:"/search/models",disabled:!1,trackName:"Models"},{value:"models2D",label:(0,n.jsxs)(D,{children:[w("header.2D_models"),(0,n.jsxs)("span",{children:[" (",(Z||0)>999?"999+":Z||0,")"]})]}),go:"/search/laser-and-cut-models",disabled:q,trackName:"Laser & Cut Models"},{value:"users",label:(0,n.jsxs)(D,{children:[w("header.user"),(0,n.jsxs)("span",{children:[" (",(P||0)>999?"999+":P||0,")"]})]}),go:"/search/users",disabled:q,trackName:"Users"},{value:"collections",label:(0,n.jsxs)(D,{children:[w("header.collections"),(0,n.jsxs)("span",{children:[" (",(C||0)>999?"999+":C||0,")"]})]}),go:"/search/collections",disabled:q,trackName:"Collections"},{value:"CommunityPost",label:(0,n.jsxs)(D,{children:[w("community.post.posts"),(0,n.jsxs)("span",{children:[" (",(L||0)>999?"999+":L||0,")"]})]}),go:"/search/postCommunity",disabled:q,trackName:"Posts"}],[k,Z,P,C,L]);(0,l.useEffect)(()=>{let e=e=>{let t=document.getElementsByClassName("models-personalized_head")[0];if(!F.current||!t)return;let r=(document.documentElement.scrollTop||document.body.scrollTop)>=t.offsetHeight+F.current.offsetHeight;y.E.setState({isSearchScroll:r})};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[F.current]);let G=e=>{(0,f.j)({evt:"SearchTabClick",content:{TabName:e.trackName,SearchQuery:q?B:j.keyword,Type:q?"Image":"Text"}})};return(0,n.jsxs)(_,{children:[(0,n.jsx)(E,{children:(0,n.jsx)(R,{className:"adapt-padding",children:(0,n.jsx)(N,{ref:F,children:(0,n.jsx)(u,{showSuggest:i,showSearchByImages:v,is2DModelSearch:b})})})}),(0,n.jsx)(M,{className:"adapt-padding",children:(0,n.jsx)(H,{value:a,children:A.map(e=>{let t="";return t=q?"".concat(e.go,"/?image=").concat(encodeURIComponent(B)):j.keyword?"".concat(e.go,"/?keyword=").concat(j.keyword):e.go,(0,n.jsx)(O,{disabled:e.disabled,label:(0,n.jsx)(T,{href:t,className:(0,z.clsx)({disabled:e.disabled}),onClick:()=>G(e),children:e.label}),value:e.value},e.value)})})}),(0,n.jsx)(I,{suggest:m,searchInstead:x}),o&&(0,n.jsx)(W,{className:"adapt-padding",children:(0,n.jsx)(h.Z,{defaultOderBy:d,searchConfig:t,categoryTree:r,createSinceKey:g,filterType:S})})]})}(i=o||(o={})).Models="models",i.Models2D="models2D",i.Users="users",i.Collections="collections",i.CommunityPost="CommunityPost"},38626:function(e,t,r){r.d(t,{Z:function(){return ec}});var i=r(52322),o=r(2784),n=r(44781),l=r(15794),a=r(28118),s=r(13157),c=r(78502),d=r(29711),p=r(11228),u=r(66600),h=r(87084),m=r(43438),g=r(44258),x=r(71022),f=r(50361),y=r.n(f),v=r(5632),b=r(25200),S=r(88873);let w=(0,n.ZP)(p.ZP)(e=>{let{theme:t}=e;return{".MuiPopover-paper":{background:t.vars.palette.colorSystem.bg_middle,boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.04), 0px 8px 16px 0px rgba(0, 0, 0, 0.08), 0px 12px 24px 0px rgba(0, 0, 0, 0.12)"}}}),j=(0,n.ZP)(s.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:80,borderRadius:4,fontSize:14,fontWeight:600,height:36,zIndex:999,border:"1px solid ".concat(t.vars.palette.colorSystem.grey300),padding:"5px 15px",color:t.vars.palette.colorSystem.grey800,background:t.vars.palette.colorSystem.bg_middle,boxSizing:"border-box","svg path":{fill:t.vars.palette.colorSystem.grey800},"&:hover":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey500)},"&.active":{border:"1px solid ".concat(t.vars.palette.colorSystem.primary)},"&.search":{borderRadius:32,width:"100%"}}}),k=(0,n.ZP)(u.Z)(e=>{let{theme:t}=e;return{display:"flex",padding:"0 24px",flexDirection:"column"}}),Z=(0,n.ZP)("h4")(e=>{let{theme:t}=e;return{margin:"4px 0 8px 0",fontSize:14,fontWeight:600,color:t.vars.palette.colorSystem.grey900}}),P=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{marginRight:"-12px",overflow:"hidden",maxHeight:88,"&.more":{maxHeight:"none"}}}),C=(0,n.ZP)(h.Z)(e=>{let{theme:t}=e;return{cursor:"pointer",margin:"0 12px 12px 0",fontSize:12,fontWeight:400,color:t.vars.palette.colorSystem.grey700,background:t.vars.palette.colorSystem.grey100,"&.checked":{background:"#00AE42",color:t.vars.palette.colorSystem.bg_middle}}}),I=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{position:"sticky",bottom:"-1px",background:t.vars.palette.colorSystem.bg_middle,display:"flex",justifyContent:"space-between",padding:"16px 24px",borderTop:"1.5px solid ".concat(t.vars.palette.colorSystem.grey200),button:{fontWeight:400,lineHeight:"18px",borderRadius:"18px"},".reset, .close":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey400),color:t.vars.palette.colorSystem.grey700},".confirm":{color:t.vars.palette.colorSystem.bg_middle}}}),z=(0,n.ZP)(m.Z)(e=>{let{theme:t}=e;return{"&.titleSpan":{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"svg, path":{fill:t.vars.palette.colorSystem.grey800}}}),_=(0,n.ZP)(g.Z)(e=>{let{theme:t}=e;return{transition:"all 0.3s","&.up":{transform:"rotate(0deg)"},"&.down":{transform:"rotate(180deg)"}}}),E={customizable:"Customizable",devModelNames:"Printer",isPrintable:"WithPrintProfile",licenses:"License",makersSupply:"MakerSupply",modelLabel:"ModelLabel",multiColor:"MultiColors",nozzleDiameters:"NozzleDiameter",printDuration:"PrintTime"},R=(0,o.forwardRef)(function(e,t){let{filter:r,viewType:n="category",onChange:l}=e,{t:a}=(0,x.$G)("common"),c=(0,v.useRouter)(),p=c.query,u=(0,o.useRef)(null),[h,m]=(0,o.useState)(!1),[g,f]=(0,o.useState)([]),[b,k]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=function(e,t){if(!e||!e.length)return{filterList:[],hasChecked:!1};let r=e.map(e=>{let r=[];if(t[e.name]){var i;r=(null===(i=t[e.name])||void 0===i?void 0:i.toString().split(","))||[]}let o=function(e,t){let r={},i=!1;null==e||e.forEach(e=>{e.group&&(r[e.group]?r[e.group].push(e):r[e.group]=[e])});let o=[];for(let e in r){let n=r[e],l=n.every(e=>t.includes(e.value)),a=!l&&n.some(e=>t.includes(e.value));!i&&(l||a)&&(i=!0),o.push({displayName:e,value:n.map(e=>e.value).join(","),group:"",children:n.map(e=>({...e,checked:t.includes(e.value)})),checked:l,indeterminate:a})}return o.length?{options:o,hasGroup:!0,hasChecked:i}:{options:null==e?void 0:e.map(e=>{let r=t.includes(e.value);return!i&&r&&(i=!0),{...e,checked:r}}),hasGroup:!1,hasChecked:i}}(e.option,r);return{...e,multiple:"checkbox"===e.webDisplay,option:o.options,hasChecked:o.hasChecked,hasGroup:o.hasGroup}});return{filterList:r=r.filter(e=>"cyber_brick_needed"!==e.name),hasChecked:r.some(e=>e.hasChecked)}}(r,c.query);f(e.filterList),k(e.hasChecked),l&&l(e.filterList)},[r,c.query,h]);let Z=()=>{m(!1)},P=(e,t)=>{let r=y()(g),i=r[e],o=i.option[t];if(i.multiple||o.checked||i.option.forEach(e=>{e.checked=!1,e.children&&e.children.map(e=>({...e,checked:!1}))}),o.checked=!o.checked,"isPrintable"===i.name&&"false"===o.value)r.forEach(e=>{["devModelNames","multiColor","printDuration"].includes(e.name)&&e.option.forEach(e=>{e.checked=!1})});else if(["devModelNames","multiColor","printDuration"].includes(i.name)){let e=r.find(e=>"isPrintable"===e.name);e&&e.option.forEach(e=>{"true"===e.value?e.checked=!0:e.checked=!1})}f(r)},C=e=>{let t={},r={};(e||g).forEach(e=>{if(E[e.name],e.multiple){let i=[];e.option.forEach(e=>{if(e.checked){var t;(null===(t=e.children)||void 0===t?void 0:t.length)?i.push(...e.children.map(e=>e.value)):i.push(e.value)}}),t={...t,[e.name]:i.join(",")},i.length&&(r[e.name]=i)}else{let i="";e.option.forEach(e=>{e.checked&&(i=e.value)}),t={...t,[e.name]:i},i&&(["true","false"].includes(i)?r[e.name]="true"===i?1:0:r[e.name]=i)}}),(0,S.j)({evt:"FilterClick",content:{ActionType:"confirm",...r}});let i={...p,...t};Object.keys(i).forEach(e=>{i[e]||delete i[e]}),m(!1),Z(),!e&&l&&l(g),c.push({query:i})},z=(0,o.useCallback)(e=>{let{name:t,optionValue:r,checked:i,only:o}=e,n=g.map(e=>e.name===t?(e.option,{...e,option:(e.option||[]).map(e=>e.value===r?{...e,checked:i}:{...e,checked:!o&&e.checked})}):e);f(n),C(n)},[g]);return(0,o.useImperativeHandle)(t,()=>({handleManualChange:z}),[z]),(0,o.useEffect)(()=>{h&&(0,S.j)({evt:"FilterClick",content:{ActionType:"expand"}})},[h]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{ref:u,variant:"outlined",onClick:()=>m(!h),className:"".concat(b?"active":""," ").concat(n),endIcon:(0,i.jsx)(d.k1n,{style:{fontSize:16}}),children:a("models.filters")}),(0,i.jsxs)(w,{id:"mouse-over-popover",open:h,anchorEl:u.current,PaperProps:{sx:{borderRadius:"4px",maxWidth:400,width:"calc(100% - 32px)",maxHeight:"50vh",paddingTop:"8px"}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:-4,horizontal:"right"},onClose:Z,disableRestoreFocus:!0,className:"g-customize-scrollbar",children:[g.map((e,t)=>(0,i.jsx)(N,{item:e,cb:e=>P(t,e)},e.name)),(0,i.jsxs)(I,{children:[(0,i.jsx)(s.Z,{onClick:()=>{let e=y()(g);e.forEach(e=>{e.option.forEach(e=>e.checked=!1)}),f(e)},variant:"outlined",className:"reset",children:a("models.reset")}),(0,i.jsx)("div",{children:(0,i.jsx)(s.Z,{className:"confirm",onClick:()=>C(),sx:{marginLeft:"20px"},children:a("models.confirm")})})]})]})]})});function N(e){let{item:t,cb:r}=e,n=(0,o.useRef)(null),[l,a]=(0,o.useState)(!1),[s,c]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=n.current;e&&c(e.scrollHeight>88)},[]),(0,i.jsxs)(k,{children:[(0,i.jsx)(Z,{children:(0,i.jsxs)(z,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,i.jsx)("span",{className:"titleSpan",children:t.displayName}),s&&(0,i.jsx)(_,{onClick:()=>{a(!l)},className:l?"up":"down",children:(0,i.jsx)(b.Z,{})})]})}),(0,i.jsx)(P,{ref:n,className:l?"more":"",children:t.option.map((e,t)=>(0,i.jsx)(C,{onClick:()=>{r(t)},label:e.displayName,color:e.checked?"success":"default",className:e.checked?"checked":""},e.value))})]},t.name)}var D=r(32712),W=r(62483),M=r(96870);let T=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{".categories_active":{}}}),H=(0,n.ZP)(s.Z)(e=>{let{theme:t}=e;return{height:36,minWidth:84,borderRadius:32,border:"1px solid ".concat(t.vars.palette.colorSystem.grey300),fontWeight:600,color:"".concat(t.vars.palette.colorSystem.grey800),background:t.vars.palette.colorSystem.bg_middle,svg:{color:"".concat(t.vars.palette.colorSystem.grey800)},"&:hover":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey500)}}}),O=(0,n.ZP)(u.Z)(e=>{let{theme:t}=e;return{display:"flex",width:"100%",height:1100,padding:"5px 20px 20px 0",flexDirection:"column",flexWrap:"wrap","@media (min-width: 1000px)":{width:900,height:455}}}),L=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column"}}),F=(0,n.ZP)("span")(e=>{let{theme:t}=e;return{marginLeft:16,height:32,fontSize:"14px",fontWeight:600,lineHeight:"32px",color:t.vars.palette.colorSystem.grey900,borderRadius:"2px",cursor:"pointer",padding:"0px 8px","&:hover":{background:t.vars.palette.colorSystem.grey200,color:"#00AE42"},"&.active":{background:"#00AE42",color:"#fff"},a:{display:"inline-block",width:"100%",paddingLeft:8}}}),B=(0,n.ZP)("span")(e=>{let{theme:t}=e;return{marginLeft:16,height:24,fontWeight:500,fontSize:12,lineHeight:"24px",color:t.vars.palette.colorSystem.grey800,cursor:"pointer",padding:"0px 8px","&:hover":{background:t.vars.palette.colorSystem.grey200,color:"#00AE42"},"&.active":{background:"#00AE42",color:t.vars.palette.colorSystem.grey200},a:{display:"inline-block",width:"100%",paddingLeft:8}}});function q(e){let{categoryTree:t}=e,{t:r}=(0,x.$G)("common"),n=(0,v.useRouter)(),l=n.query,[a,s]=(0,o.useState)(!1),[c,d]=(0,o.useState)([]),p=(0,o.useRef)(null),u=(0,o.useRef)(null);(0,W.Z)([u,p],()=>{s(!1)}),(0,o.useEffect)(()=>{if(l.categories){let e=Number(l.categories);if(0===e){d([t[0]]);return}let r=[t[0]];t.forEach(t=>{t.id===e?r.push(t):t.children&&t.children.forEach(i=>{i.id===e&&r.push(t,i)})}),d(r)}else d([t[0]])},[l.categories]);let h=e=>{s(!1),n.push({query:{...n.query,categories:e}}),(0,S.j)({evt:"CategoryFilterClick",content:{ActionType:"confirm",CategoryId:e}})};return(0,o.useEffect)(()=>{a&&(0,S.j)({evt:"CategoryFilterClick",content:{ActionType:"expand"}})},[a]),(0,i.jsxs)(T,{children:[(0,i.jsx)(H,{ref:p,type:"button","aria-describedby":"categories_popper",className:"categories_active",variant:"outlined",onClick:e=>{e.stopPropagation(),s(e=>!e)},endIcon:(0,i.jsx)(M.G,{}),fullWidth:!0,sx:{justifyContent:"space-between"},children:r("models.category.categories")}),(0,i.jsx)(D.Z,{ref:u,id:"categories_popper",placement:"bottom-start",open:a,anchorEl:p.current,sx:e=>({zIndex:9999,background:e.vars.palette.colorSystem.bg_top,width:"calc(100% - 32px)",maxWidth:900,height:455,overflowY:"auto",boxShadow:e.shadows[4]}),children:(0,i.jsx)(O,{children:t.map(e=>(0,i.jsxs)(L,{children:[(0,i.jsx)(F,{onClick:()=>h(e.id),className:Number(l.categories)===e.id?"active":"",children:e.name}),e.children.map(e=>(0,i.jsx)(B,{onClick:()=>h(e.id),className:Number(l.categories)===e.id?"active":"",color:"success",children:e.name},e.id))]},e.id))})})]})}var A=r(16030),G=r(24411),$=r(87860),Q=r(2973);let U=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{}}),Y=(0,n.ZP)(s.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:80,borderRadius:4,fontSize:14,fontWeight:600,height:36,zIndex:999,border:"1px solid ".concat(t.vars.palette.colorSystem.grey300),padding:"5px 15px",color:t.vars.palette.colorSystem.grey800,background:t.vars.palette.colorSystem.bg_middle,boxSizing:"border-box","svg path":{fill:t.vars.palette.colorSystem.grey800},"&:hover":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey500)},"&.active":{border:"1px solid ".concat(t.vars.palette.colorSystem.primary)},"&.search":{borderRadius:32,width:"100%"}}}),K=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flexDirection:"column",height:"100%"}}),X=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{position:"absolute",top:16,right:24,padding:"0px 20px",color:t.vars.palette.colorSystem.grey600,cursor:"pointer",marginRight:"-20px"}}),V=(0,o.forwardRef)(function(e,t){let{hasFilter:r,children:n}=e,l=(0,v.useRouter)(),{t:a}=(0,x.$G)("common"),{width:s}=(0,Q.Z)(),u=(0,c.Z)(),h=(0,o.useRef)(null),[m,g]=(0,o.useState)(!1);(0,o.useEffect)(()=>{g(!1)},[l.asPath]);let f=()=>{g(!1)};(0,o.useImperativeHandle)(t,()=>({handleClose:f}));let y=(0,o.useMemo)(()=>{let e={borderRadius:"4px 4px 12px 12px!important",background:u.vars.palette.colorSystem.bg_base,overflow:"hidden"};return s>600?{...e,width:"536px",height:"576px",maxWidth:"100vw",maxHeight:"75vh"}:{...e,width:"100vw",maxWidth:"100vw",maxHeight:"100vh",top:0,bottom:0}},[s]);return(0,o.useEffect)(()=>{m&&(0,S.j)({evt:"FilterClick",content:{ActionType:"expand"}})},[m]),(0,i.jsxs)(U,{ref:h,children:[(0,i.jsx)(Y,{variant:"outlined",onClick:()=>{g(e=>!e)},className:"".concat(r?"active":""," search"),endIcon:(0,i.jsx)($.k,{style:{fontSize:16}}),children:a("models.filters")}),(0,i.jsxs)(p.ZP,{open:m,onClose:f,anchorEl:h.current,marginThreshold:0,PaperProps:{elevation:0,sx:{...y,"& ::-webkit-scrollbar-track":{background:"transparent"}}},transformOrigin:{horizontal:"right",vertical:-8},anchorOrigin:{horizontal:"right",vertical:"bottom"},className:"g-customize-scrollbar",children:[s<=600&&(0,i.jsx)(X,{onClick:f,children:(0,i.jsx)(d.u5Y,{})}),(0,i.jsx)(K,{children:n})]})]})});var J=r(52268),ee=r(58079);function et(e){let{searchConfig:t}=e,{session:r}=(0,ee.a)(),[n,l]=(0,o.useState)([]),[a,s]=(0,o.useState)(!1),{width:c}=(0,Q.Z)(),d=(0,o.useRef)(null);(0,o.useEffect)(()=>{(null==r?void 0:r.user.uid)?J.Ip.getMyPreference().then(e=>{l(e.filaments||[])}):l([])},[null==r?void 0:r.user.uid]);let p=e=>{function r(t,r){if(["checkbox","printer"].includes(t)){var i;return(null===(i=e[r])||void 0===i?void 0:i.split(","))||[]}return e[r]}let i=y()(e);t.filter.design.forEach(e=>{var t;i[e.name]&&(i[e.name]=r(e.webDisplay,e.name)),null===(t=e.children)||void 0===t||t.forEach(e=>{i[e.name]&&(i[e.name]=r(e.webDisplay,e.name))})}),(0,S.j)({evt:"FilterClick",content:{ActionType:"confirm",...i}})};return(0,i.jsx)(V,{hasFilter:a,ref:d,children:(0,i.jsx)(G.Z,{designFilterCfg:t.filter.design,isMobileLayout:!0,myFilaments:n,colorOptions:t.colors,filamentsOptions:t.filaments,onHasFilterChange:s,printerSelectorShowType:c<=600?"drawer":"popper",onFilamentsChange:l,confirmCallbackFn:e=>{var t;null===(t=d.current)||void 0===t||t.handleClose(),p(e)}})})}let er=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",flex:1,gap:12,flexWrap:"wrap","@media (min-width: 390px)":{flexWrap:"wrap",justifyContent:"space-between",gap:16},"@media (min-width: 800px)":{justifyContent:"flex-end",gap:16},".search-order-by":{".order-expand-box":{display:"none","@media (min-width: 920px)":{display:"flex",flexDirectioin:"row",gap:8}},".collapse_filter":{width:"auto",".MuiInputBase-root":{borderRadius:32,".MuiOutlinedInput-notchedOutline":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey300),borderRadius:32},"&:hover":{borderRadius:32,".MuiOutlinedInput-notchedOutline":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey500)}},"&.Mui-focused":{".MuiOutlinedInput-notchedOutline":{border:"1px solid ".concat(t.vars.palette.colorSystem.primary)}}},"@media (min-width: 800px)":{width:"fit-content"},"@media (min-width: 920px)":{display:"none"}}}}}),ei=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{width:"100%","@media (min-width: 390px)":{width:"calc(50% - 8px)"},"@media (min-width: 800px)":{width:"auto","&.order-filter":{flex:1}}}}),eo=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{position:"relative",height:36,"@media (min-width: 800px)":{width:"fit-content"}}}),en=(0,n.ZP)(l.Z)(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",fontSize:14,background:t.vars.palette.colorSystem.bg_middle,borderRadius:32,height:36,".MuiOutlinedInput-notchedOutline":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey300),borderRadius:32},".MuiOutlinedInput-input":{padding:"8px 14px",lineHeight:"20px"},"&:hover":{borderRadius:32,".MuiOutlinedInput-notchedOutline":{border:"1px solid ".concat(t.vars.palette.colorSystem.grey500)}},"&.Mui-focused":{".MuiOutlinedInput-notchedOutline":{border:"1px solid ".concat(t.vars.palette.colorSystem.primary)}},"& > .MuiSelect-select":{paddingRight:"20px",color:t.vars.palette.colorSystem.grey800,fontWeight:"600"}}}),el=(0,n.ZP)(a.Z)(e=>{let{theme:t}=e;return{color:t.vars.palette.colorSystem.grey700}});(0,n.ZP)("div")(e=>{let{theme:t}=e;return{display:"none",alignItems:"center","@media (min-width: 1200px)":{display:"flex"}}}),(0,n.ZP)(s.Z)(e=>{let{theme:t}=e;return{minWidth:"auto",marginRight:16,fontSize:14,fontWeight:600,height:"100%",padding:0,color:"#595959","&.current_order":{color:t.vars.palette.primary.main},a:{width:"100%",height:36,lineHeight:"36px",padding:"0 8px"}}});let ea=(0,n.ZP)("span")(e=>{let{theme:t}=e;return{display:"inline-flex",alignItems:"center",justifyContent:"center",height:16,position:"absolute",top:"50%",right:10,fontSize:16,marginTop:-8,pointerEvents:"none"}});(0,n.ZP)("div")(e=>{let{theme:t}=e;return{display:"flex",justifyContent:"space-between",width:"100%","@media (min-width: 1000px)":{width:"auto"}}});let es=(0,n.ZP)("span")(e=>{let{theme:t}=e;return{display:"inline-block",height:"36px",lineHeight:"36px",fontSize:14,color:t.vars.palette.colorSystem.grey700}});function ec(e){var t;let{defaultOderBy:r,searchConfig:n,categoryTree:l,createSinceKey:a="designCreateSince",filterType:s="design"}=e,p=(0,c.Z)(),{t:u}=(0,x.$G)("common"),h=(0,v.useRouter)(),m=h.query,[g,f]=(0,o.useState)(0);(0,o.useEffect)(()=>{f(Number(m[a]||0))},[m]);let y=[{name:u("models.search.24_hours"),value:1},{name:u("models.search.7_days"),value:7},{name:u("models.search.30_days"),value:30},{name:u("models.search.1_year"),value:365},{name:u("models.search.all_time"),value:0}],b={id:0,name:u("models.all"),picUrl:"",desc:"",descPic:"",children:[],bannerName:"",slug:""},w=(0,o.useMemo)(()=>[b,...l],[l]),j=(0,o.useMemo)(()=>{switch(s){case"favorites":return{orderBy:null==n?void 0:n.orderBy.favoritesSearch};case"design2d":return{orderBy:null==n?void 0:n.orderBy.designSearch,filter:null==n?void 0:n.filter.design2d};case"design":return{orderBy:null==n?void 0:n.orderBy.designSearch,colors:null==n?void 0:n.colors,filaments:null==n?void 0:n.filaments,filter:null==n?void 0:n.filter.design};default:return{}}},[n,s]);return(0,i.jsxs)(er,{children:[(0,i.jsx)(A.Z,{orderByOptions:j.orderBy||[],className:"search-order-by",expandPrefix:(0,i.jsx)(es,{children:u("models.search.sort_by")}),defaultOrderBy:r}),(0,i.jsx)(ei,{children:(0,i.jsx)(eo,{children:(0,i.jsx)(en,{size:"small",value:g,onChange:e=>{let t=e.target.value;f(t),h.push({query:{...h.query,[a]:t.toString()}}),(0,S.j)({evt:"TimeFilterClick",content:{ActionType:"confirm",FilterOption:t.toString()}})},MenuProps:{PaperProps:{sx:{borderRadius:"32px",background:p.vars.palette.colorSystem.bg_middle}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:-4,horizontal:"right"}},IconComponent:()=>(0,i.jsx)(ea,{children:(0,i.jsx)(d.wZd,{})}),onOpen:()=>{(0,S.j)({evt:"TimeFilterClick",content:{ActionType:"expand"}})},children:null==y?void 0:y.map(e=>(0,i.jsx)(el,{sx:{fontSize:"14px"},value:e.value,children:e.name},e.name))})})}),"design"===s&&n&&(0,i.jsx)(ei,{children:(0,i.jsx)(et,{searchConfig:n})}),"design2d"===s&&(null===(t=j.filter)||void 0===t?void 0:t.length)&&(0,i.jsx)(ei,{children:(0,i.jsx)(R,{filter:j.filter,viewType:"search"})}),!!l.length&&(0,i.jsx)(ei,{children:(0,i.jsx)(q,{categoryTree:w})})]})}}}]);
//# sourceMappingURL=81296-45c5fbafd6d74274.js.map